<!DOCTYPE html>
<html>
    <head>
        <title>p910-k80-ubuntu-early-configuration</title>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <link rel='shortcut icon' type='image/x-icon' href='favicon.ico?'>
        <link rel='stylesheet' href='default.css'>
        <link rel='stylesheet' href='../intl/intlflg.css'>
        <!-- here begins the Javascript... why for the hell I got here? //-->
        <meta http-equiv='Content-Script-Type' content='text/javascript'>
        <link rel='stylesheet' href='ucustom.css' id='customStylesheet' media='screen'>
        <script>const cssdir='';</script note='global variable'>
        <script src='css-style-changer.js' defer></script>
        <link rel='stylesheet' href='printer.css' media='print'>
    </head>
    <body>
<style>#printlink { display: inline; } @page { size: legal; margin: 0.50in 13.88mm 0.50in 13.88mm; zoom: 100%; } @media print { html { zoom: 100%; } }</style>
<p class='topbar'></p>
<div class='topbar' width='800px' translate='no'><b id='menu' onClick='nextStylesheet()'>&thinsp;&#9783;&thinsp;&Ropf;</b> &thinsp;&mdash;&thinsp; &#8543;&#8239;release: <b class='topbar'>2025-02-11&nbsp;<sup class='date-type topbar' id='datenote'>(&hairsp;<a href='#date-legenda' class='date-type topbar'>1</a>&hairsp;)</sup></b>  &thinsp;&mdash;&thinsp; rev.: <b class='topbar
'>23</b rev_num='
'> &thinsp;&mdash;&thinsp; transl.:&nbsp; <a class='topbar' href='https://robang74-github-io.translate.goog/chatbots-for-fun/html/p910-k80-ubuntu-early-configuration?_x_tr_sl=en&_x_tr_tl=it&_x_tr_hl=it-IT&_x_tr_pto=wapp' target='_blank' rel='noopener noreferrer'>IT</a> &nbsp;<b>&middot;</b>&nbsp; <a class='topbar' href='https://robang74-github-io.translate.goog/chatbots-for-fun/html/p910-k80-ubuntu-early-configuration?_x_tr_sl=en&_x_tr_tl=de&_x_tr_hl=de-DE&_x_tr_pto=wapp' target='_blank' rel='noopener noreferrer'>DE</a> &nbsp;<b>&middot;</b>&nbsp; <a class='topbar' href='https://robang74-github-io.translate.goog/chatbots-for-fun/html/p910-k80-ubuntu-early-configuration?_x_tr_sl=en&_x_tr_tl=fr&_x_tr_hl=fr-FR&_x_tr_pto=wapp' target='_blank' rel='noopener noreferrer'>FR</a> &nbsp;<b>&middot;</b>&nbsp; <a class='topbar' href='https://robang74-github-io.translate.goog/chatbots-for-fun/html/p910-k80-ubuntu-early-configuration?_x_tr_sl=en&_x_tr_tl=es&_x_tr_hl=es-ES&_x_tr_pto=wapp' target='_blank' rel='noopener noreferrer'>ES</a> &thinsp;&mdash;&thinsp; goto:&nbsp; <a class='topbar' href='../index.html#index'>.&#x27F0;.</a> &nbsp;<b>&middot;</b>&nbsp; <a class='topbar' href='../../roberto-a-foglietta/index.html'target=_blank>RAF</a> &nbsp;<b>&middot;</b>&nbsp; <a class='topbar' href='../../chatgpt-answered-prompts/index.html'target=_blank>Q&A</a> <span id='printlink'>&thinsp;&mdash;&thinsp; <b>⎙</b>&hairsp;: <a aria-label='print this page' class='topbar' href='javascript:window.print()'>PDF</a></span>&nbsp;</div>
<div id="firstdiv">
<p class='topbar'></p>
<div align="center"><img class="bwsketch" src="../img/p910-ubuntu-early-configuration.jpg" width="800"><br></div>
<p></p>
<H2 id="ubuntu-early-configuration-for-p910-with-k80">Ubuntu early configuration for P910 with K80</H2>
<p></p>
<li>This paper is part of the <a href="p910-k80-installation-manual-intro.html#" target='_blank' rel='noopener noreferrer'>Fujitsu P910 w/ Tesla K80 installation manual</a> serie.</li>
<p></p>
This article is related to the setup of the connections with/in the Fujitsu Esprimo P910 E85+, early Ubuntu 24.04.1 LTS configuration and to do some tests in preparation of installing the Nvidia Tesla K80 accelerator board. This article has been <a href="https://github.com/robang74/chatbots-for-fun/commit/5683e51d567316ff5697d33ae8a73984ad9cd2ca#diff-4a04ab3a2a8e7cac526767d6944357316edfd4dd0efbec75f21edf5db893325dR247" target='_blank' rel='noopener noreferrer'>created</a> starting from the <a href="https://github.com/robang74/chatbots-for-fun/blob/1f13c17ca981785e56c576fe9308a93a22841bf4/dual-psu-esprimo-p910-installation.md#about-the-connections-within-p910collecting-here-to-move-on-the-next-article" target='_blank' rel='noopener noreferrer'>notes</a> taken at the end of the article about dual PSU installation, in the final version of the manual which is going to collect all the contribution, this article will be incorporated at the following chapter after the P910's BIOS upgrade and hardware diagnostic tests.
<p></p>
<hr>
<p></p>
<H3 id="front-usb-30-ports">Front USB 3.0 ports</H3>
<p></p>
The Tesla K80 is so long that it goes over the USB 3.0 connector but it is too high. In order to keep the two USB 3.0 front ports, a 90° adapter can be used. There are two similar adapters quite similar and I took the one with 15 mm height which it seems to fit in place but the other which is 1 mm lower, I think it fits even better.
<p></p>
<div class='center'>
<img class="bwsketch darkinv" src="../img/two-kind-of-connectors.png" width="400">
<br>
<sup>right click menu to enlarge (x2) the image</sup>
</div>
<p></p>
Because the front USB 3.0 ports are working at 40 MB/s - while those in the back at 450 MB/s - can be fine living only with 2x USB 2.0 at 30 MB/s on the front panel. Therefore, this adapter should be considered an optional. It is better to buy an USB 3.0 extension cable and leave it connected to one of the ports on the back of the case.
<p></p>
<hr class="pagebreak">
<p></p>
<H3 id="ethernet-configuration">Ethernet configuration</H3>
<p></p>
First of all we need to set up the Ethernet network link between the workstation and the GPU server.
<p></p>
<div class='center'><table id='table-001'><tr><th> Hostname </th><th> IPv4 </th><th> IPv6 </th><th> IP address </th><th> Netmask </th><th> Gateway </th><th> DNS </th><th> Route </th><th> Device </th></tr>
<tr class='trline'><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td class='td1stcol'> X390 </td><td> manual </td><td> disable </td><td> 10.10.10.1 </td><td> 255.255.255.0 </td><td></td><td> off </td><td> automatic </td><td> usbeth0 </td></tr>
<tr><td class='td1stcol'> P100 </td><td> manual </td><td> disable </td><td> 10.10.10.2 </td><td> 255.255.255.0 </td><td></td><td> off </td><td> automatic </td><td> pcieth0 </td></tr>
</table>
</div><p></p>
These configuration settings are provided to be used with the Ubuntu Network Manager. Please note that installing Ubuntu 24.04.1 LTS is not mandatory but for lowering the entry barrier for those users who are not used to operating as system administrators.
<p></p>
<div class="post-it"><b class="post-it">&#9432;</b>
<p></p>
For those prefer to use Microsoft Windows, please notice that I strongly doubt that a 2014 system will be support by Windows 11 and hence you will be forced to be stick with Windows 10 at the little extra cost $30/year support plus the a license than you might provide yourself buying a refurbished OEM sata disk/system. However, if you decide to go with Windows 10 and pay for its support, then refer to those you are paying to give you support! <img class='emoji wbsketch' src='../img/emoji/wink.png'>
<p></p>
</div>
<p></p>
Esprimo P910 has an Intel PRO/1000 Gigabit ethernet which linked with a cheap USB FastEthernet 100 Mbit/s network adapter will provide such performace below:
<p></p>
<blockquote class="code"><code>
k80user&commat;p910:~$ nc -l 1111 > /dev/null
<p></p>
roberto&commat;x390:~$ dd if=/dev/zero bs=1500 count=16K | nc -N 10.10.10.2 1111<br>
16384+0 records in<br>
16384+0 records out<br>
24576000 bytes (25 MB, 23 MiB) copied, 2.01924 s, 12.2 MB/s
</code></blockquote>
<p></p>
Which is good-enough for a reactive GUI remote control but relatively slow to transfer large amount of data. So, a Gigabit USB adapter is worth its 2x price.
<p></p>
<hr>
<p></p>
<H3 id="remote-control">Remote control</H3>
<p></p>
<blockquote><span class="warnicon spanicon">&nbsp;<svg class="warnicon svgicon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg><nobr class="alerts" translate="no">&nbsp;&nbsp;WARNING!&nbsp;&nbsp;</nobr></span><br><br>Please, note that this is NOT the proper way to go with a system in "production" but a setup shortcut.</blockquote>
<p></p>
In order to avoid to waste our time switching between our laptop/PC and the GPU server:
<p></p>
<li>login into Gnome GUI session with the k80usr's password (e.g. no autologin session)</li>
<p></p>
<li><tt>Settings &rarr; System &rarr; Remote Desktop &rarr; Desktop Sharing &rarr; Remote Control &rarr; ON</tt></li>
<p></p>
<li><tt>Settings &rarr; System &rarr; Users &rarr; Unlock &rarr; Automatic Login &rarr; OFF</tt></li>
<p></p>
<li><tt>Settings &rarr; System &rarr; Secure Shell &rarr; ON</tt></li>
<li class='li2in'><tt>sudo apt install openssh-server -y</tt>  &larr; <i>in whatever rather than Ubuntu 24.04</i></li>
<p></p>
<li><tt>Settings &rarr; Privacy & Security &rarr; Blank Screen Delay &rarr; NEVER</tt></li>
<p></p>
These settings will allow us to access the GPU server with Remmina and any SSH client.
<p></p>
<div class="pagebreak"></div>
<p></p>
<H4>Root SSH password-less login</H4>
<p></p>
We are lazy and we are proud of it, especially when repetitive tasks are at stake. This includes password digitization for frequent accesses. One in particular is the root access to a remote host using SSH without entering the password. Moreover, by the password is a way of login that usually is disabled by default for the <tt>root</tt> user, at least.
<p></p>
<blockquote class="code"><code>
<b># On the client side</b>
<p></p>
ssh-keygen -t rsa<br>
ssh-copy-id k80usr&commat;10.10.10.2<br>
ssh k80usr&commat;10.10.10.2<br>
<p></p>
<b># On the server side</b>
<p></p>
sudo -s<br>
mkdir -p /root/.ssh<br>
cat /home/k80usr/.ssh/authorized_keys >>/root/.ssh/authorized_keys<br>
chmod go-wrx -R /root/.ssh<br>
echo "tput cvvis" >> ~/.bashrc<br>
echo "set nocompatible" >> ~/.vimrc<br>
touch ~/.Xauthority<br>
exit<br>
echo "tput cvvis" >> ~/.bashrc<br>
echo "set nocompatible" >> ~/.vimrc<br>
touch ~/.Xauthority<br>
exit<br>
<p></p>
<b># On the client side</b>
<p></p>
printf "\nrl() { ssh -XY root&commat;10.10.10.2; }\n" >> ~/.bashrc<br>
printf "sl() { ssh -XY k80usr&commat;10.10.10.2; }\n" >> ~/.bashrc<br>
bash; rl<br>
</code></blockquote>
<p></p>
Appending two functions at the <tt>.bashrc</tt> file, in every new <tt>bash</tt> shell we can just digit <tt>sl</tt> or <tt>rl</tt> for user or root login on our GPU server.
<p></p>
<hr>
<p></p>
<H3 id="dvi-to-vga-adapter">DVI to VGA adapter</H3>
<p></p>
The Esprimo P910 comes with a DVI port, and in case you plan to couple with an old VGA monitor like I did, then expect that a cheap DVI-VGA adapter will limit the monitor resolution to 1024x768 despite being advertised differently. Which is enough for doing the preliminary stuff and remoting the desktop.
<p></p>
Unfortunately, it also affects the resolution of the shared desktop by Gnome RDP. In order to mitigate this limitation, it is worth installing the Gnome tweaks and injecting a new resolution from a Gnome terminal:
<p></p>
<blockquote class="code"><code>
sudo apt install gnome-tweaks -y
<p></p>
mcvt='$(cvt 1280 1024 75 | tail -n1 | cut -d\" -f3-)'<br>
echo '#!/bin/bash'"<br>
xrandr --newmode 1280x1024 $mcvt<br>
xrandr --addmode VGA-1 1280x1024<br>
xrandr --output VGA-1 --mode 1280x1024<br>
" > ~/.xinitrc; chmod +x ~/.xinitrc
<p></p>
gnome-session-properties # to add the .xinitrc script
</code></blockquote>
<p></p>
With Gnome tweaks we can change the fonts and icons sizes, plus setting the zoom at 75%. Which combined with the maximum resolution supported by the monitor (e.g. 1280x1024, 5:4) provides a display equivalent area (e.g. 1700x1366) enlarged by 78% (and 3x than the 1024x768 given by the adapter) but at lower 96 &rarr; 72 DPI resolution. Not bad at all, for an old piece of trashware! <img class='emoji wbsketch' src='../img/emoji/wink.png'>
<p></p>
<hr class="pagebreak">
<p></p>
<H3 id="wi-filan-networking">Wi-Fi/LAN networking</H3>
<p></p>
The Wi-Fi dongle is NOT an alternative to the cabled network for transferring data to the GPU server. Because configuring the Wi-Fi in a way that clients over that network can see each other is NOT a good idea, in terms of security nor data privacy.
<p></p>
On the other hand, connecting the GPU server in a cabled network requires a proxy/firewall for reaching the Internet which can be useful for maintenance, updates and downloads. In a home network the Wi-Fi usually provides Internet access.
<p></p>
Providing the GPU server with an independent connection to the Internet, which can physically disable removing the USB dongle, allows us to downsize the RJ45 cabled network to a single link point-to-point with our workstation without configuring it as Internet proxy as well.
<p></p>
Please note that within the <b>RTL8188</b>’s family there are adapters which support 2.4GHz at 150 Mbit/s, only. Just in case your Wi-Fi network is working only at 5GHz, instead. Moreover, it will result relatively slow to leverage a full-fledged optic fiber Internet connection.
<p></p>
<hr>
<p></p>
<H3 id="thermal-control">Thermal control</H3>
<p></p>
Let start from the basics, here below some line commands for Ubuntu just for starting with the P910 before even installing the Tesla K80 within, with <tt>sudo -s</tt> root priviledges:
<p></p>
<blockquote class="code"><code>
apt install lm-sensors fancontrol hardinfo i2c-tools python3-smbus pigz acpi \<br>
 &nbsp; &nbsp; kmod cpufrequtils wget read-edid hwinfo htop unzip synaptic \<br>
 &nbsp; &nbsp; gedit acpid acpitool inxi gkrellm gkrellm-cpufreq -y
<p></p>
modprobe coretemp cpuid<br>
echo "cpuid" >>/etc/modules<br>
service kmod start; sensors-detect --auto<br>
systemctl enable fancontrol; sensors; pwmconfig
</code></blockquote>
<p></p>
Moreover, the application <a href="https://gkrellm.srcbox.net/" target='_blank' rel='noopener noreferrer'>gkrellm</a> - even if it is not particularly well integrated in Ubuntu - can help us keep the system under careful supervision. Here <a href="https://github.com/robang74/gkrellm2-config#readme" target='_blank' rel='noopener noreferrer'>github.com/robang74/gkrellm2-config</a> a suggested way to configure and theming it
<p></p>
<blockquote><tt>Package id 0:  +44.0°C  (high = +85.0°C, crit = +105.0°C)</tt></blockquote>
<p></p>
Which is the highest temperature seen up to now, with the case open and laying on its closed side. Which makes the CPU radiator operate in a sub-optimal way, as per its factory design. Without the support of an active device like a fan, it relies on the "hot-air is lighter" physics principle that lets the air flow bottom-up through its fins for natural convection. But in that position, laying down 90° tilted, the air tends to remain trapped among its fins instead of flowing and the main fan - with the case open - is too far to bring a sensitive benefit before its flow spreads around unguided.
<p></p>
<hr>
<p></p>
<H3 id="noise-control">Noise control</H3>
<p></p>
Time to close the tower case and raise it on its feet again.
<p></p>
<blockquote class="code"><code>
dd if=/dev/zero bs=1M | pigz -11 -p4 - >/dev/null &<br>
for i in $(seq 1 40); do sensors | grep Package;<br>
sleep 1; done & sleep 30; killall pigz; echo;
</code></blockquote>
<p></p>
Running this code for two times in a row, lead to warm up the CPU core:
<p></p>
<blockquote><tt>Package id 0:  +77.0°C  (high = +85.0°C, crit = +105.0°C)</tt></blockquote>
<p></p>
At 75°C the main 12 cm fan starts to be loud, working at almost the full throttle. This is because the default BIOS configuration is tuned to be silent as much as possible. However, these settings could be changed and the difference is very sensitive.
<p></p>
<li><tt>F2 &rarr; BIOS &rarr; Advanced &rarr; Acoustic Management &rarr; Acoustic Management &rarr; 0/1</tt></li>
<p></p>
<li><tt>F2 &rarr; BIOS &rarr; Advanced &rarr; System Monitoring &rarr; Fan Control &rarr; auto, enhanced, disabled</tt></li>
<p></p>
While acoustic management has an impact on "auto" and "enhanced" fan control modes, it has not on "disabled" for which all the fans are running at their full throttle.
<p></p>
<hr>
<p></p>
<H3 id="cooling-noise-tests">Cooling noise tests</H3>
<p></p>
In order to have a quantitative idea about the noise figure, I have installed this Android application on my smartphone and put it on the tower case.
<p></p>
<li><b>Sound meter</b> : SPL & dB meter by <b>KTW Apps</b>, 4.8* on <a href="https://play.google.com/store/apps/details?id=com.ktwapps.soundmeter&hl=en" target='_blank' rel='noopener noreferrer'>Google Play</a></li>
<p></p>
Between the case and the smartphone I put a mouse pad, just to absorb those low-frequencies which are below the human ability to hear but a capacitor microphone may catch. Usually, this kind of measures should be done after a calibration and reading the value at a standard distance (usually 1 mt) from the geometric center of the noise source.
<p></p>
Instead, I took the value on an arbitrary and generic mouse pad with an uncalibrated app because I am interested in the relative metric, not in the absolute. In fact, a quiet room is about 40 dB while the keyboard beep scales at 62 dB. My studio in the night is as quiet as 25 db while the modded P910 with its 12 cm fan at full throttle showed a steady 64 db figure, the double of the most silent BIOS configuration.
<p></p>
Using this <a href="https://raw.githubusercontent.com/robang74/chatbots-for-fun/refs/heads/main/data/cpu-temp-test.sh" target='_blank' rel='noopener noreferrer'>script</a> saved in <tt>data</tt>, this table can be completed with some temperature ranges, just to provide a quick and basic reference.<span id="fan-noise"></span>
<p></p>
<div class='center'><table id='table-002'><tr><th> Acoustic Management </th><th> Fan Control </th><th> Noise R(dB) </th><th> Noise R(A²) </th><th> Start </th><th> Highest </th><th> Ending </th><th> T-Gap </th></tr>
<tr class='trline'><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td class='td1stcol'> enabled </td><td> auto </td><td> 32 </td><td> 1.00 x </td><td> 49-61°C </td><td> 67-74°C </td><td> 51-57°C </td><td> 83% </td></tr>
<tr><td class='td1stcol'> enabled </td><td> enhanced </td><td> 40 </td><td> 6.31 x </td><td> 42-48°C </td><td> 60-63°C </td><td> 42-45°C </td><td> 66% </td></tr>
<tr><td class='td1stcol'> irrelevant </td><td> disabled </td><td> 64 </td><td> 1585 x </td><td> 32-34°C </td><td> 46-48°C </td><td> 28-38°C </td><td> 43% </td></tr>
<tr><td class='td1stcol'> fan w/ splitter </td><td> disabled </td><td> 70 </td><td> 6310 x </td><td> 31-37°C </td><td> 49-52°C </td><td> 31-35°C </td><td> 49% </td></tr>
</table>
</div><p></p>
Notice that decibel are a logarithmic way of measuring the ratio between two sound intensities, alike human hearing are working. Hence considering a referencing intensity (32 dB) then the difference with another value gives us the absolute ratio between the two related intensities despite the scale was not standardly calibrated.
<p></p>
<div class="post-it"><b class="post-it">&#9432;</b>
<p></p>
In the final version of the manual, this part will end up after the BIOS upgrade chapter, so before every hardware change. Instead, the temperatures above reported, have been taken after having modified the Esprimo P910 moving its main 12cm fan and installing the handcraft baffle to increase the case air-flow. At the time of the measures, the two middle PCI slot covers were removed. Hence, it could be possible to find different values with the original hardware configuration.
<p></p>
</div>
<p></p>
For sake of completeness, these temperatures have been measured in a 20°C room temperature. Sometimes, the ending temperature is lower than the starting temperature but this should not surprise us because in the meantime the fan started to cool down the CPU and the ending temperature is taken after 15 seconds the 30s job is completed.
<p></p>
When the Fan Control and the Acoustic Management are both disabled, and an <a href="../img/main-fan-splitter-between-k80-and-cpu.jpg" target='_blank' rel='noopener noreferrer'>air-flow splitter</a> is added to <a href="dual-psu-esprimo-p910-installation.html#going-with-the-wind" target='_blank' rel='noopener noreferrer'>cooling down</a> the Tesla K80, then because of the hand-crafted splitter the noise increases by a six decibels compared when the Tesla K80 nor the splitter were installed.
<p></p>
However, the reference noise level is 40 dB, when the GPU heating additive contribute reasonably requires an enhanced cooling policy but instead we force the fan at its full throtling with the air-flow splitter as per iper-prudence initial testing policy. Also, the splitter does not reduce sensitively the CPU cooling efficiency.
<p></p>
Just to have an idea, using the inverse square law and ISO 9613-1:1996 calculator (440Hz, 50%, 1atm, 20°C) having 40 dB at 20 cm is equivalent to 70 dB at 5 mt. Considering 40 dB noise level as a "quiet room in daylight hours", then others house's rooms are not sensitively impacted by the GPU server in terms of noise when the noisy room's door is closed.
<p></p>
<hr>
<p></p>
<H3 id="spinning-the-whirlybird">Spinning the whirlybird</H3>
<p></p>
Unsurprisingly, noisier it gets, cooler it ends up. How much? The absolute temperature scale is graded in Kelvin but its zero is too far away. However, neither Celsius nor Fahrenheit are good in providing a relative reference. The main point is the same: setting the zero, but in this case the zero is the environment temperature which is 20°C, our reference zero.
<p></p>
While 85°C is our "boiling water" point which is a reference temperature for the CPU that has been indicated by the CPU foundry process. For comparison, the GPU incorporated into the Tesla K80 card, has an 88°C alarming temperature trigger. Under this PoV, 43% is 43°R, while the room temperature is 0°R and 100°R is the warning temperature.
<p></p>
The table presented in the previous section shows that the original system can potentially be quieter than a quiet room in the night but also annoying like the keyboard beep when a key is kept pressed down, but at lower frequency. Once completed the system software configuration, the GPU card will be installed and tested.
<p></p>
<li><a href="../data/p910-full-throttle-fan-noise.m4a">P910's full throttle fan noise</a> six seconds of recording.</li>
<p></p>
Prudently, we will test the system in its initial stages of configuration by unleashing its "wanna-be an helicopter" character... <img class='emoji wbsketch' src='../img/emoji/grin.png'>
<p></p>
<hr>
<p></p>
<H3 id="kernel-boot-config">Kernel boot config</H3>
<p></p>
These options are the suggested for the Linux kernel command line:
<p></p>
<li><tt>mtrr_gran_size=8M mtrr_chunk_size=64M</tt></li>
<li class='li2in'>to solve the issue about MTRR losing 230 MB of RAM mitigated to 6 MB</li>
<p></p>
<li><tt>pcie_aspm=off mem_encrypt=off</tt> and <tt>nouveau.modeset=0</tt></li>
<li class='li2in'>for improving the performances of the Tesla K80, but it consumes more energy</li>
<li class='li2in'>to prevent the generic open-source nvidia cards driver to be loaded on boot</li>
<p></p>
<div class="pagebreak"></div>
<p></p>
<li><tt>pci=realloc</tt> &rarr; <tt>pci=realloc,assign-busses,use_crs</tt></li>
<li class='li2in'>due to an explicit suggestion for adding that argument by the <tt>dmesg</tt> output</li>
<li class='li2in'>more parameters about the PCI/e subsystem for the sake of Nvidia K80 board</li>
<p></p>
The above parameters should go into the <tt>GRUB_CMDLINE_LINUX_DEFAULT</tt> variable which is recorded into the <tt>/etc/default/grub</tt> file. Then <tt>sudo update-grub</tt> to write the change in the grub's boot record. Moreover, blacklisting these two kernel modules and rebuild all the initramfs files, is a good idea:
<p></p>
<blockquote class="code"><code>
(echo;echo "blacklist chromeos_pstore";echo "blacklist nouveau") | sudo tee -a \<br>
 &nbsp; /etc/modprobe.d/blacklist.conf<br>
<p></p>
sudo update-initramfs -u -k all<br>
</code></blockquote>
<p></p>
Then <tt>reboot</tt> to let the system restart with the new settings. Finally, after the reboot <tt>cat /proc/cmdline</tt> and <tt>lsmod</tt> to check.
<p></p>
<hr>
<p></p>
<H3 id="bios-settings">BIOS settings</H3>
<p></p>
First of all, reset the BIOS settings to its optimal default and then on the top of that settings we can make some adjustments:
<p></p>
<li>PCIe ASPM support: <b>Disabled</b></li>
<li>Intel TXT support: <b>Disabled</b></li>
<li>Secure Boot: <b>Disabled</b></li>
<p></p>
It is better to disable executing code isolation and secure boot options until the system is correctly configured. Moreover, in order to avoid possible conflicts by legacy support from BIOS, also:
<p></p>
<li>Legacy USB support: <b>Disabled</b></li>
<li>Serial and parallel ports: <b>Disabled</b></li>
<li>CSM launch: <b>Disabled</b></li>
<p></p>
Because the 2nd PSU installed, we might want use a multi-plug extender with 0/1 switch, in that case these make our life easier:
<p></p>
<li>Power-On source: <b>ACPI</b></li>
<li>Power failure recovery: <b>Disabled</b></li>
<p></p>
Enabling the "Secure Boot" requires the CSM disabled while the USB legacy support is requested by non-UEFI bootable devices.
<p></p>
However, none of these changes has a sensitive impact on the <tt>dmesg</tt> output which means that the 6.x Linux kernel is not affected by. Despite this, it is better to start with a BIOS configuration as much friendly as possible and then when we know that the system is working correctly, make changes that matter for our specific user case.
<p></p>
<br>
<p></p>
<H2 id="share-alike">Share alike</H2>
<p></p>
<p>&copy; 2025, <b>Roberto A. Foglietta</b> &lt;roberto.foglietta<span>&commat;</span>gmail.com&gt;, <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target='_blank' rel='noopener noreferrer'>CC BY-NC-ND 4.0</a></p>
<p></p>
</div>
<p></p>
<div id='date-legenda' align='center' translate='no'><sub><hr></sub><sub><b>date legenda</b>: &#x2776; first draft publishing date or &#x2777; creation date in git, otherwise &#x2778; html creation page date. <u>&mapstoup;<a href='#' class='toplink' translate='no'>top</a>&mapstoup;</u></sub></div>
<br class='pagebreak'>
    </body>
</html>
